#
# /etc/sudoers
#
# Generated by Chef for <%= node[:fqdn] %>
#

Defaults      !lecture,tty_tickets,!fqdn
<% if @agent_forwarding -%>
Defaults      env_keep+=SSH_AUTH_SOCK
<% end -%>

Defaults        !lecture,tty_tickets,!fqdn
Defaults        env_keep += "HOME PS1 PATH"
Defaults        secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
Defaults        exempt_group=admin


# User privilege specification
root          ALL=(ALL) ALL

<% @sudoers_users.each do |user| -%>
<%= user %>   ALL=(ALL) <%= "NOPASSWD:" if @passwordless %>ALL
<% end -%>

# Members of the sysadmin group may gain root privileges
%sysadmin     ALL=(ALL) <%= "NOPASSWD:" if @passwordless %>ALL

<% @sudoers_groups.each do |group| -%>
# Members of the group '<%= group %>' may gain root privileges
%<%= group %> ALL=(ALL) <%= "NOPASSWD:" if @passwordless %>ALL
<% end -%>

<%= '#includedir /etc/sudoers.d' if @include_sudoers_d  %>
